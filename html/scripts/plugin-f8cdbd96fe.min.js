(function(e){"use strict";var t={maxAge:120,minAge:0,futureDates:false,maxYear:0,dateFormat:"middleEndian",monthFormat:"short",placeholder:true,tabindex:null,text:{year:"Year",month:"Month",day:"Day",months:{short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]}},widget:{wrapper:{tag:"div",class:"input-group"},wrapperYear:{use:true,tag:"span",class:"input-group-addon"},wrapperMonth:{use:true,tag:"span",class:"input-group-addon"},wrapperDay:{use:true,tag:"span",class:"input-group-addon"},selectYear:{name:"birthday[year]",class:"form-control input-sm"},selectMonth:{name:"birthday[month]",class:"form-control input-sm"},selectDay:{name:"birthday[day]",class:"form-control input-sm"}},onChange:function(){}};e.fn.bootstrapBirthday=function(a){var n={};var r=function(r){n.settings=e.extend({},t,a);n.$element=e(r);s();i()};var s=function(){n.$wrapper=e("<"+n.settings.widget.wrapper.tag+"/>");if(n.settings.widget.wrapper.class!=""){n.$wrapper.attr("class",n.settings.widget.wrapper.class)}n.$wrapperYear=e("<"+n.settings.widget.wrapperYear.tag+"/>");if(n.settings.widget.wrapperYear.class!=""){n.$wrapperYear.attr("class",n.settings.widget.wrapperYear.class)}n.$wrapperMonth=e("<"+n.settings.widget.wrapperMonth.tag+"/>");if(n.settings.widget.wrapperMonth.class!=""){n.$wrapperMonth.attr("class",n.settings.widget.wrapperMonth.class)}n.$wrapperDay=e("<"+n.settings.widget.wrapperDay.tag+"/>");if(n.settings.widget.wrapperDay.class!=""){n.$wrapperDay.attr("class",n.settings.widget.wrapperDay.class)}n.$year=e("<select></select>");if(n.settings.widget.selectYear.name!=""){n.$year.attr("name",n.settings.widget.selectYear.name)}if(n.settings.widget.selectYear.class!=""){n.$year.attr("class",n.settings.widget.selectYear.class)}n.$month=e("<select></select>");if(n.settings.widget.selectMonth.name!=""){n.$month.attr("name",n.settings.widget.selectMonth.name)}if(n.settings.widget.selectMonth.class!=""){n.$month.attr("class",n.settings.widget.selectMonth.class)}n.$day=e("<select></select>");if(n.settings.widget.selectDay.name!=""){n.$day.attr("name",n.settings.widget.selectDay.name)}if(n.settings.widget.selectDay.class!=""){n.$day.attr("class",n.settings.widget.selectDay.class)}};var i=function(){if(n.settings.widget.wrapperYear.use==true){n.$wrapperYear.append(n.$year)}else{n.$wrapperYear=n.$year}if(n.settings.widget.wrapperMonth.use==true){n.$wrapperMonth.append(n.$month)}else{n.$wrapperMonth=n.$month}if(n.settings.widget.wrapperDay.use==true){n.$wrapperDay.append(n.$day)}else{n.$wrapperDay=n.$day}switch(n.settings.dateFormat){case"bigEndian":n.$wrapper.append(n.$wrapperYear).append(n.$wrapperMonth).append(n.$wrapperDay);if(n.settings.tabindex!=null){n.$year.attr("tabindex",n.settings.tabindex);n.$month.attr("tabindex",n.settings.tabindex++);n.$day.attr("tabindex",n.settings.tabindex++)}break;case"littleEndian":n.$wrapper.append(n.$wrapperDay).append(n.$wrapperMonth).append(n.$wrapperYear);if(n.settings.tabindex!=null){n.$day.attr("tabindex",n.settings.tabindex);n.$month.attr("tabindex",n.settings.tabindex++);n.$year.attr("tabindex",n.settings.tabindex++)}break;case"middleEndian":default:n.$wrapper.append(n.$wrapperMonth).append(n.$wrapperDay).append(n.$wrapperYear);if(n.settings.tabindex!=null){n.$month.attr("tabindex",n.settings.tabindex);n.$day.attr("tabindex",n.settings.tabindex++);n.$year.attr("tabindex",n.settings.tabindex++)}break}if(n.settings.placeholder){e("<option value='0'>"+n.settings.text.year+"</option>").appendTo(n.$year);e("<option value='0'>"+n.settings.text.month+"</option>").appendTo(n.$month);e("<option value='0'>"+n.settings.text.day+"</option>").appendTo(n.$day)}e(this).attr("type","hidden");var t=new Date;var a=t.getFullYear();var r=a-n.settings.minAge;var s=a-n.settings.maxAge;if(n.settings.futureDates&&n.settings.maxYear!=a){if(n.settings.maxYear>1e3){r=n.settings.maxYear}else{r=a+n.settings.maxYear}}for(var i=r;i>=s;i--){e("<option></option>").attr("value",i).text(i).appendTo(n.$year)}for(var d=0;d<12;d++){e("<option></option>").attr("value",d+1).text(n.settings.text.months[n.settings.monthFormat][d]).appendTo(n.$month)}for(var o=1;o<32;o++){e("<option></option>").attr("value",o).text(o).appendTo(n.$day)}n.$element.attr("type","hidden");n.$element.after(n.$wrapper);p();n.$wrapper.change(function(){var e=new Date;var t=e.getMonth()+1;var a=e.getDate();var s=parseInt(n.$year.val(),10);var i=parseInt(n.$month.val(),10);var p=parseInt(n.$day.val(),10);var d=new Date(s,i,0).getDate();var o=parseInt(n.$month.children(":last").val());var l=parseInt(n.$day.children(":last").val());if(l>d){while(l>d){n.$day.children(":last").remove();l--}}else{if(l<d){while(l<d){l++;n.$day.append("<option value="+l+">"+l+"</option>")}}}if(!n.settings.futureDates&&s==r){if(o>t){while(o>t){n.$month.children(":last").remove();o--}n.$day.children(":first").attr("selected","selected")}if(i===t){while(l>a){n.$day.children(":last").remove();l-=1}}}if(s!=r&&o!=12){while(o<12){n.$month.append("<option value="+(o+1)+">"+n.settings.text.months[n.settings.monthFormat][o]+"</option>");o++}}if(s*i*p!=0){if(i<10){i="0"+i}if(p<10){p="0"+p}var g=s+"-"+i+"-"+p;n.$element.val(g);n.settings.onChange(g)}})};var p=function(){var e=n.$element.val();if(e!=""){var t=e.split("-");var a;switch(n.settings.dateFormat){case"bigEndian":a=new Date(t[0]+"-"+t[1]+"-"+t[2]+"T00:00:00");break;case"littleEndian":a=new Date(t[2]+"-"+t[1]+"-"+t[0]+"T00:00:00");break;case"middleEndian":default:a=new Date(t[2]+"-"+t[0]+"-"+t[1]+"T00:00:00");break}if(a){n.$year.val(a.getFullYear());n.$month.val(a.getMonth()+1);n.$day.val(a.getDate())}}};r(this)}})(jQuery);